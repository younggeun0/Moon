---
layout: post
title: Java 정리 27
tags: [Java]
excerpt: "Java 정리 - IO Stream"
date: 2018-12-19
feature: https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/JavaImageFeature.png?raw=true
comments: true
---
 
## Java 정리 27 - IO Stream

---

### IO(Input/ Output) Stream

* **JVM 외부에 존재하는 데이터를 처리하기 위해 사용하는 클래스들**
* **java.io 패키지**에서 관련 클래스를 제공
* **단방향 IO**
  * 읽기 스트림은 읽기만, 쓰기 스트림은 쓰기만 가능
* **8bit Stream, 16bit Stream 두가지** 제공
  * **8bit Stream (byte기반 스트림)**
    * 모든 데이터를 읽고 쓸 수 있음
  * **16bit Stream (문자열기반 스트림)**
    * 문자열 데이터만 읽고 쓸 수 있음

![01](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/01.png?raw=true)

* 클래스 이름뒤에 **Input,OutStream**이면 **8bit**, **Reader,Writer**면 **16bit Stream**
* **Input, OutputStream을 부모로 두면 8bit Stream**
	* Data**InputStream** / Data**OutputStream**
	* File**InputStream** / File**OutputStream**
	* Object**InputStream** / Object**OutputStream**
	* ...
* **Reader, Writer를 부모로 두면 16bit Stream**
	* Buffered**Reader** / Buffered**Writer**
	* File**Reader** / File**Writer**
	* InputStream**Reader** / OutputStream**Writer**
	* ...
* 8bit Stream과 16bit Stream은 **결합하여 사용할 수 있다.**
  * **8bit와 16bit를 같이쓰면 속도가 보완이 된다.**
  * **8bit Stream이 속도가 빠름**
  	* 데이터의 양은 적다.
  * **16bit Stream**은 속도가 느림
  	* **데이터의 양은 많다.**

---

### 입력 Stream

![02](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/02.png?raw=true)

* **JVM이 시작될 때** 자동으로 **표준 error OutputStream, 표준 input InputStream, out OutputStream 이 생성**된다.
  * 이 표준 Stream을 close하면 JVM을 다시 실행할때까지 다시 Stream 연결을 못함
* 키보드로 입력하면 **메인보드 Keyboard Buffer**에 값이 들어가짐
  * 버퍼의 크기는 256(0~255), 크기만큼 입력 가능
  * **Enter가 떨어지면 Buffer 내용이 OS로 전달됨**
    * cpu에 따라 입력순서를 그대로 처리하는 **Little Endian**, 입력순서를 거꾸로 처리하는 **Big Endian** 처리방식(RISC 계열 cpu(MAC계열) )이 존재.
    * 인텔계열 cpu는 Little Endian 방식
  * OS에 전달된 키입력 내용은 **JVM의 System.in(InputStream)을 통해 JVM으로 들어오게 되고** JVM에 존재하는 **instance는 InputStream의 read() 를 통해 해당 값을 읽어올 수 있다.**

![03](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/03.png?raw=true)

---

### 키보드 입력 처리

* **System.in**
  * **in은 InputStream**
  * read()로 키보드로 입력된 내용을 읽어들일 수 있다. 

```java
// 입력 값 중 최초 입력 문자 받기
public class UseKeyboardInput {
     public UseKeyboardInput() {
          System.out.println("아무키나 누르고 엔터");
          try {
              int input = System.in.read();
              System.out.println("입력값 : " + input);

          } catch (IOException e) {
              e.printStackTrace();
          }
     }
     public static void main(String[] args) {
          new UseKeyboardInput();
     }
}
```

![04](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/04.png?raw=true)

```java
// 여러 단어 입력받기
public class UseKeyboardInput {
     public UseKeyboardInput() {
          System.out.println("아무키나 누르고 엔터");
          try {
              int input = 0;
              while(true) {
                   input = System.in.read();
                   
                   System.out.print((char)input);
                   
                   // enter는 13, 13나오면 종료
                   if (input == 13) {
                        break;
                   }
              }
          } catch (IOException e) {
              e.printStackTrace();
          }
     }
     public static void main(String[] args) {
          new UseKeyboardInput();
     }
}
```

![05](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/05.png?raw=true)

![06](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/06.png?raw=true)

* 위에 입력을 찍어보면 **윈도우는 엔터 입력 시 \r\n이 함께 입력됨**
	* **\r (Carriage Return)** : 그 줄 맨 앞으로 이동
	* **\n (Line Feed)** : 다음 줄로 이동
* **한글 입력받기**
	* 한글을 입력받기위해선 **8bit과 16bit Stream을 연결해야 한다.**
		* 한글은 8bit Stream을 사용하면 깨짐, **16bit Stream은 안깨짐**
		* 두 Stream의 크기가 달라 바로 연결 못함
			* **두 Stream을 연결하는 Stream이 필요**

![07](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/07.png?raw=true)

```java
InputStream is = System.in;
InputStreamReader isr = new InputStreamReader(is); // has-a 
BufferedReader br = new BufferedReader(isr);       // is-a
```

![08](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/08.png?raw=true)


* **InputStreamReader**
  * **8bit-16bit Stream 결합**
  * 읽어들인 **charset**을 변환(파라미터 2개받는 생성자 사용시)
* **BufferedReader**
  * **속도개선**
  * **줄단위로 읽는 기능(readLine())**

```java
// 한줄로 바꾼다면
BufferedReader br = new BufferedReader(
    new InputStreamReader(System.in));

try {
    // br의 readLine()을 사용하면 한줄 읽어서
    String s = br.readLine();
} catch (IOException ie) {
    ie.printStackTrace();
}

// 사용 후 연결을 끊어야 한다.
br.close();
```

```java
public class UseKeyboardInput {
     public UseKeyboardInput() {
          System.out.println("아무키나 누르고 엔터");
          
          // 8bit Stream과 16bit Stream을 연결
          BufferedReader br = new BufferedReader(
                        new  InputStreamReader(System.in));
          
          try {
              // 16bit Stream을 사용하여 입력된 데이터를 줄단위로 읽어 들인다.
              String s = br.readLine();
              System.out.println(s);
              
              // 스트림 사용이 끝났으면 스트림의 연결을 끊는다.
              br.close();

          } catch (IOException ie) {
              ie.printStackTrace();
          }
     }
     public static void main(String[] args) {
          new UseKeyboardInput();
     }
}
```

![09](https://github.com/younggeun0/younggeun0.github.io/blob/master/_posts/img/java/27/09.png?raw=true)

---

### File 입력 처리

* **FileInputStream**
  * **8bit**
  * **모든 형식의 파일**을 읽어들일 수 있다.
    * 이미지, 동영상, 문서열
    * 파일을 복사할때 사용
      * 웹에서 파일 첨부
* **FileReader**
  * **16bit**
  * **독자 포맷으로 만들어지지 않은 문자열 파일만** 읽어들일 수 있다.
    * txt (hwp, doc 등은 읽어들일 수 없다.)

---

### File

* **java.io 패키지에서 제공하는 클래스**
* **File에 대한 정보를 얻는 일**
* **Directory를 생성**
* **File 삭제**

```java
// 생성
File file = new File("경로");

// 길이(크기)
long l = file.length(); // byte로 반환, 정수보다 큰 값을 반환가능하므로 long

// 파일인지 확인할 때
file.isFile();

// 폴더인지 확인할 때
file.isDirectory();

// 읽기 가능한지 확인할 때
file.canRead();

// 쓰기 가능한지 확인할 때 
file.canWrite();

// 실행 가능한지 확인할 때
file.canExecute();

// 숨김파일인지 확인할 때
file.isHidden();

// 폴더 내 모든 폴더/파일을 얻기
File[] f = file.listFiles();

// 파일 삭제
file.delete();

// 디렉토리 생성
file.mkdir();  // root부터 생성하는 디렉토리는 생성불가(과거에, 현재는 mkdirs와 동일)
file.mkdirs(); // 어느 경로의 디렉토리든 생성가능

// 파일의 마지막 수정날짜
long date = file.lastModified();

// 파일의 경로
String path = file.getPath();

// 파일의 파일명
String fName = file.getName();

// 파일의 절대경로(AbsolutePath)
String aPath = file.getAbsolutePath(); // Drive 레터가 소문자, 대문자 다 됨

// 파일의 규범경로(CanonicalPath), 파일에 접근하는 유일한 경로
String cPath = file.getCanonicalPath(); // Drive 레터가 대문자만 가능

// 파일이 존재
file.exists();

// 파일명 변경
file.renameTo(변경할이름);
```

